services:
  - type: web
    name: n8n
    runtime: docker
    dockerfilePath: ./Dockerfile
    plan: free
    envVars:
      - key: DB_TYPE
        value: postgresdb
      - key: DB_POSTGRESDB_HOST
        value: db.ozcxyboebtefpltjrkxj.supabase.co
      - key: DB_POSTGRESDB_PORT
        value: "5432"
      - key: DB_POSTGRESDB_DATABASE
        value: postgres
      - key: DB_POSTGRESDB_USER
        value: postgres
      - key: DB_POSTGRESDB_PASSWORD
        fromSecret: DB_PASSWORD
      - key: DB_POSTGRESDB_SCHEMA
        value: public
      - key: N8N_ENCRYPTION_KEY
        fromSecret: N8N_ENCRYPTION_KEY
      - key: N8N_PORT
        value: "5678"
      - key: NODE_ENV
        value: production

env:
  - key: DB_PASSWORD
    value: N8nDb_2025_Secure#Pass!
  - key: N8N_ENCRYPTION_KEY
    value: n8n-secret-key-change-this-in-production-to-random-32-chars-min
